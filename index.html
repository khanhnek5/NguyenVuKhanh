<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nh·∫≠n Key Tool H√¥m Nay</title>
<style>
body { font-family: Arial, sans-serif; background: #071022; color: #eef3f5; text-align: center; padding: 50px; }
h1 { color: #16a085; }
button { background: #16a085; color: #fff; border: none; padding: 10px 20px; cursor: pointer; margin-top: 10px; border-radius: 5px; }
button:hover { background: #138f75; }
#key-box { font-size: 24px; margin: 20px 0; user-select: all; }
#countdown { margin-top: 10px; font-size: 18px; color: #f39c12; }
</style>
</head>
<body>

<h1>üîë Key Tool H√¥m Nay üîë</h1>
<p id="message">ƒêang ki·ªÉm tra token...</p>
<div id="key-box"></div>
<button id="copyBtn">Copy Key</button>
<div id="countdown"></div>

<script>
(async function(){
    const message = document.getElementById('message');
    const keyBox = document.getElementById('key-box');
    const countdownEl = document.getElementById('countdown');
    const copyBtn = document.getElementById('copyBtn');

    // L·∫•y token t·ª´ URL (Yeumoney redirect s·∫Ω tr·∫£ ?t=<token>)
    const urlParams = new URLSearchParams(window.location.search);
    const tokenParam = urlParams.get('t');

    if(!tokenParam){
        message.innerHTML = "‚ùå Vui l√≤ng click link YeuMoney ƒë·ªÉ l·∫•y token.";
        copyBtn.style.display = 'none';
        return;
    }

    try {
        // Ki·ªÉm tra token h·ª£p l·ªá theo ng√†y
        const todayPrefix = new Date().toISOString().slice(0,10).replace(/-/g,''); // YYYYMMDD
        if(!tokenParam.startsWith(todayPrefix)){
            message.textContent = "‚ùå Token kh√¥ng h·ª£p l·ªá. Vui l√≤ng v∆∞·ª£t link YeuMoney h√¥m nay.";
            copyBtn.style.display = 'none';
            return;
        }

        // T·∫°o key hi·ªÉn th·ªã
        const key = 'KhanhMG-' + tokenParam;
        keyBox.textContent = key;
        message.textContent = "‚úÖ Key h√¥m nay c·ªßa b·∫°n:";

        // ƒê·∫øm ng∆∞·ª£c t·ªõi 0h00 h√¥m sau
        function updateCountdown(){
            const now = new Date();
            const tomorrow = new Date();
            tomorrow.setHours(24,0,0,0);
            const diff = tomorrow - now;
            if(diff <= 0){
                countdownEl.textContent = "‚è≥ Key ƒë√£ h·∫øt h·∫°n.";
                return;
            }
            const h = Math.floor(diff/1000/3600);
            const m = Math.floor(diff/1000/60)%60;
            const s = Math.floor(diff/1000)%60;
            countdownEl.textContent = `‚è≥ H·∫øt h·∫°n sau: ${h} gi·ªù ${m} ph√∫t ${s} gi√¢y`;
        }
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Copy button
        copyBtn.onclick = () => {
            navigator.clipboard.writeText(key).then(()=>alert("‚úÖ Key ƒë√£ copy!"));
        }

    } catch(err){
        message.textContent = "‚ùå L·ªói khi l·∫•y key: " + err;
        copyBtn.style.display = 'none';
    }
})();
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>KhanhMG ‚Äî Key h√†ng ng√†y</title>
<style>
  body{font-family:Inter,system-ui,Arial;background:#071022;color:#eef3f5;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
  .card{width:min(720px,94%);background:rgba(255,255,255,0.02);padding:22px;border-radius:12px;text-align:center}
  img.logo{width:120px;margin-bottom:12px;border-radius:12px}
  .key{display:inline-block;padding:12px 16px;border-radius:10px;background:rgba(0,0,0,0.2);font-family:monospace;font-size:22px;margin-top:12px}
  button{padding:10px 14px;border-radius:8px;border:0;background:#16a085;color:#052016;font-weight:700;cursor:pointer;margin-top:12px}
  .note{margin-top:8px;color:#9aa9b2;font-size:13px}
</style>
</head>
<body>
<div class="card">
  <!-- Logo -->
  <img class="logo" src="https://sf-static.upanhlaylink.com/img/image_2025103134746677a16d9e7c9ddd1cbb6ae1c575.jpg" alt="Logo">

  <h2>üîê Key h√†ng ng√†y ‚Äî KhanhMG</h2>
  <div class="key" id="key">‚Äî</div>
  <button id="btnCopy">Sao ch√©p</button>
  <div class="note">Key ƒë·ªïi m·ªói 00:00 theo gi·ªù thi·∫øt b·ªã. M·∫´u: <code>KhanhMG-&lt;10 k√Ω t·ª± A-Z,a-z,0-9&gt;</code></div>
</div>

<script>
const CHARSET = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
const PREFIX = "KhanhMG-";
const KEY_LEN = 10;
const SALT = ""; // Public, ai c≈©ng l·∫•y key ƒë∆∞·ª£c

async function sha256Bytes(msg) {
  const enc = new TextEncoder();
  const data = enc.encode(msg);
  const h = await crypto.subtle.digest('SHA-256', data);
  return new Uint8Array(h);
}

async function generateDailyKey() {
  const now = new Date();
  const y = now.getFullYear(), m = String(now.getMonth()+1).padStart(2,'0'), d = String(now.getDate()).padStart(2,'0');
  const seed = SALT + `${y}-${m}-${d}`;
  const bytes = await sha256Bytes(seed);
  let key = "";
  for(let i=0;i<KEY_LEN;i++){
    const b1 = bytes[i % bytes.length];
    const b2 = bytes[(i+11) % bytes.length];
    const val = ((b1<<8)|b2) >>>0;
    const idx = val % CHARSET.length;
    key += CHARSET.charAt(idx);
  }
  return PREFIX + key;
}

const elKey = document.getElementById('key');
async function updateKey(){ elKey.textContent = await generateDailyKey(); }
updateKey();
setInterval(updateKey, 3000); // t·ª± update n·∫øu ng√†y thay ƒë·ªïi

document.getElementById('btnCopy').addEventListener('click', async ()=>{
  try{ await navigator.clipboard.writeText(elKey.textContent); alert("ƒê√£ sao ch√©p: "+elKey.textContent); }
  catch(e){ alert("Copy kh√¥ng ƒë∆∞·ª£c, copy th·ªß c√¥ng: "+elKey.textContent); }
});
</script>
</body>
</html>
